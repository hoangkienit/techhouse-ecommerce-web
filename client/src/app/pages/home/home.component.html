<div class="home-wrapper" [isLoading]="isLoading">

    <!-- Sidebar danh mục -->
    <aside class="categories-sidebar">
        <nb-card size="small">
            <nb-card-header>
                <div class="panel-title">Danh mục chính</div>
            </nb-card-header>
            <nb-card-body class="p-0">
                <nb-list>
                    <nb-list-item class="item-sideBar" *ngFor="let c of categories" (click)="goToCategory(c)">
                        <nb-user size="tiny" [name]="c" [title]="'Xem sản phẩm ' + c"></nb-user>
                    </nb-list-item>
                </nb-list>
            </nb-card-body>
        </nb-card>
    </aside>

    <!-- Content chính -->
    <div class="content-main">

        <!-- Sản phẩm mới -->
        <section class="panel">
            <nb-card class="mb-3">
                <nb-card-header class="p-3 d-flex justify-between align-center">
                    <div class="panel-title">Sản phẩm mới</div>
                    <div class="panel-action"><a nbButton size="tiny" (click)="goToCategory('')" ghost>Xem tất cả</a>
                    </div>
                </nb-card-header>
                <nb-card-body>
                    <div class="products-grid">
                        <nb-card class="product-card" *ngFor="let p of newProducts" (click)="goToDetail(p._id)">
                            <nb-card-body class="p-0">
                                <div class="img-wrapper">
                                    <img class="product-img" [src]="p.product_imgs[0]" [alt]="p.product_name"
                                        (error)="onImgError($event)">
                                </div>
                                <div class="info-wrapper p-2">
                                    <div class="name">{{ p.product_name }}</div>
                                    <div class="price">{{ formatPrice(p.product_price) }}</div>
                                </div>
                            </nb-card-body>
                        </nb-card>
                    </div>
                </nb-card-body>
            </nb-card>
        </section>

        <!-- Sản phẩm bán chạy -->
        <section class="panel best-sellers">
            <nb-card class="mb-3">
                <nb-card-header class="p-3 d-flex justify-between align-center">
                    <div class="panel-title">Sản phẩm bán chạy</div>
                    <div class="panel-action"><a nbButton size="tiny" (click)="goToTop('best-sellers')" ghost>Top</a>
                    </div>
                </nb-card-header>
                <nb-card-body>
                    <div class="products-grid">
                        <nb-card class="product-card" *ngFor="let p of bestSellers" (click)="goToDetail(p._id)">
                            <nb-card-body class="p-0">
                                <div class="img-wrapper">
                                    <img class="product-img" [src]="p.product_imgs[0]" [alt]="p.product_name"
                                        (error)="onImgError($event)" />
                                </div>
                                <div class="info-wrapper p-2">
                                    <div class="name">{{ p.product_name }}</div>
                                    <div class="price">{{ formatPrice(p.product_price) }}</div>
                                </div>
                            </nb-card-body>
                        </nb-card>
                    </div>
                </nb-card-body>
            </nb-card>
        </section>
    </div>
</div>